# 2.修改openfast文件可以跑长时间仿真

因为输出之后的文件只有0.1s仿真测试，需要调整仿真文件

## 必须调整的参数

### 1. BeamDyn 收敛参数

在 `DLC1.1_0_weis_job_0_BeamDyn.dat` 中：

fortran

```fortran
20                     NRMax       - 增加最大迭代次数到20
0.0001                stop_tol    - 放宽收敛容差到1E-5
```

### 2. 风场时间长度

100秒仿真需要相应长度的风场数据。检查 `wind/` 目录中的 `.bts` 文件是否足够长，或者在 InflowWind 文件中设置：

fortran

```
------- InflowWind INPUT FILE -------------------------------------------------------------------------
Generated with OpenFAST_IO
---------------------------------------------------------------------------------------------------------------
False                  Echo        - Echo input data to <RootName>.ech (flag)
1                      WindType    - switch for wind file type (1=steady; 2=uniform; 3=binary TurbSim FF; 4=binary Bladed-style FF; 5=HAWC format; 6=User defined; 7=native Bladed FF)
0.0                    PropagationDir - Direction of wind propagation (meteoroligical rotation from aligned with X (positive rotates towards -Y) -- degrees) (not used for native Bladed format WindType=7)
0.0                    VFlowAng    - Upflow angle (degrees) (not used for native Bladed format WindType=7)
False                  VelInterpCubic - Use cubic interpolation for velocity in time (false=linear, true=cubic) [Used with WindType=2,3,4,5,7]
1                      NWindVel    - Number of points to output the wind velocity    (0 to 9)
0.                     WindVxiList - List of coordinates in the inertial X direction (m)
0.                     WindVyiList - List of coordinates in the inertial Y direction (m)
150.0                  WindVziList - List of coordinates in the inertial Z direction (m)
================== Parameters for Steady Wind Conditions [used only for WindType = 1] =========================
15.0                    HWindSpeed  - Horizontal wind speed                            (m/s)
150.0                  RefHt       - Reference height for horizontal wind speed      (m)
0.12                   PLExp       - Power law exponent                              (-)

```

### 3. 时间步长检查

在主 `.fst` 文件中确认时间步长合理：

fortran

```fortran
100.0                  TMax        - 100秒仿真时间
0.00125                DT          - 这里不能到0.0125
```

![image-20250918224409701](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20250918224409701.png)